"use strict";exports.id=3983,exports.ids=[3983],exports.modules={41190:(e,t,r)=>{r.d(t,{I:()=>n});var a=r(10326),o=r(17577),s=r(51223);let n=o.forwardRef(({className:e,type:t,...r},o)=>a.jsx("input",{type:t,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:o,...r}));n.displayName="Input"},29280:(e,t,r)=>{r.d(t,{Bw:()=>h,Ph:()=>u,Ql:()=>x,i4:()=>f,ki:()=>d});var a=r(10326),o=r(17577),s=r(18792),n=r(941),l=r(96633),i=r(32933),c=r(51223);let u=s.fC;s.ZA;let d=s.B4,f=o.forwardRef(({className:e,children:t,...r},o)=>(0,a.jsxs)(s.xz,{ref:o,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,a.jsx(s.JO,{asChild:!0,children:a.jsx(n.Z,{className:"h-4 w-4 opacity-50"})})]}));f.displayName=s.xz.displayName;let p=o.forwardRef(({className:e,...t},r)=>a.jsx(s.u_,{ref:r,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(l.Z,{className:"h-4 w-4"})}));p.displayName=s.u_.displayName;let m=o.forwardRef(({className:e,...t},r)=>a.jsx(s.$G,{ref:r,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:a.jsx(n.Z,{className:"h-4 w-4"})}));m.displayName=s.$G.displayName;let h=o.forwardRef(({className:e,children:t,position:r="popper",...o},n)=>a.jsx(s.h_,{children:(0,a.jsxs)(s.VY,{ref:n,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...o,children:[a.jsx(p,{}),a.jsx(s.l_,{className:(0,c.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),a.jsx(m,{})]})}));h.displayName=s.VY.displayName,o.forwardRef(({className:e,...t},r)=>a.jsx(s.__,{ref:r,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=s.__.displayName;let x=o.forwardRef(({className:e,children:t,...r},o)=>(0,a.jsxs)(s.ck,{ref:o,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(s.wU,{children:a.jsx(i.Z,{className:"h-4 w-4"})})}),a.jsx(s.eT,{children:t})]}));x.displayName=s.ck.displayName,o.forwardRef(({className:e,...t},r)=>a.jsx(s.Z0,{ref:r,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=s.Z0.displayName},82015:(e,t,r)=>{r.d(t,{g:()=>n});var a=r(10326),o=r(17577),s=r(51223);let n=o.forwardRef(({className:e,...t},r)=>a.jsx("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));n.displayName="Textarea"},12470:(e,t,r)=>{r.d(t,{Db:()=>d,h_:()=>u,x1:()=>c});var a=r(17577);let o=e=>new Promise(t=>setTimeout(t,e)),s=new Map,n=new Map,l=new Map,i=new Map;function c(e){if(!e){s.clear(),console.log("Cache API enti\xe8rement vid\xe9");return}if(s.has(e)){s.delete(e),console.log(`Cache pour ${e} vid\xe9`);return}let t=0;for(let r of Array.from(s.keys()))r.includes(e)&&(s.delete(r),t++);t>0&&console.log(`${t} entr\xe9es de cache contenant "${e}" ont \xe9t\xe9 vid\xe9es`)}function u(e,t={}){let[r,c]=(0,a.useState)(null),[u,d]=(0,a.useState)(null),[f,p]=(0,a.useState)(!0),m=(0,a.useRef)(null),h=(0,a.useRef)(!0),x=(0,a.useRef)(!0),g=(0,a.useRef)(!1);if(!e||""===e)return{data:null,error:"URL invalide",loading:!1,refetch:async()=>{},stopAutoRefresh:()=>{}};let b=(0,a.useCallback)(async(a=!1)=>{if(g.current&&!a||n.get(e))return;let u=Date.now(),f=l.get(e)||0;if(!a&&!x.current&&u-f<1e4)return;if(n.set(e,!0),l.set(e,u),g.current=!0,!a){let t=s.get(e);if(t&&u-t.timestamp<6e4){h.current&&(c(t.data),p(!1)),n.set(e,!1);return}}let y=t.retries||1,w=t.retryDelay||2e3,v=0,N=!1;try{for(h.current&&(r||p(!0),d(null));!N&&v<=y;)try{let r={method:t.method||"GET",headers:{"Content-Type":"application/json",...t.headers},cache:"no-store"};t.body&&"GET"!==t.method&&(r.body=JSON.stringify(t.body));let a=new AbortController,o=setTimeout(()=>a.abort(),15e3);r.signal=a.signal;let n=await fetch(e,r);if(clearTimeout(o),!n.ok){if(n.status>=500&&v<y)throw Error(`Erreur serveur ${n.status}`);if(401===n.status)throw Error("Vous devez \xeatre connect\xe9 pour acc\xe9der \xe0 cette ressource");let e=await n.json().catch(()=>({}));throw Error(e.error||`Erreur ${n.status}: ${n.statusText}`)}let l=await n.json();s.set(e,{data:l,timestamp:Date.now()}),h.current&&c(l),N=!0,x.current=!1;break}catch(t){if(t instanceof DOMException&&"AbortError"===t.name)throw Error("La requ\xeate a pris trop de temps");if(v<y)0===v&&console.warn(`Tentative \xe9chou\xe9e pour ${e}. Nouvelle tentative...`),await o(w*(v+1)),v++;else throw t}}catch(t){console.error(`Erreur lors de l'appel \xe0 ${e}`),r?h.current&&d("Erreur de rafra\xeechissement. Donn\xe9es potentiellement obsol\xe8tes."):t instanceof TypeError&&t.message.includes("fetch")?h.current&&d("Probl\xe8me de connexion au serveur. Veuillez v\xe9rifier votre connexion internet."):h.current&&d(t instanceof Error?t.message:"Une erreur est survenue")}finally{1>=(i.get(e)||0)&&n.set(e,!1),h.current&&p(!1),h.current&&t.refreshInterval&&t.refreshInterval>0&&(m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{h.current&&b(!0)},t.refreshInterval))}},[e,t.method,t.body,t.headers,t.retries,t.retryDelay,t.refreshInterval,r]);return{data:r,error:u,loading:f,refetch:(0,a.useCallback)(async()=>{await b(!0)},[b]),stopAutoRefresh:(0,a.useCallback)(()=>{m.current&&(clearTimeout(m.current),m.current=null)},[])}}function d(e,t="POST"){let[r,s]=(0,a.useState)(null),[n,l]=(0,a.useState)(null),[i,u]=(0,a.useState)(!1);return{mutate:(0,a.useCallback)(async r=>{console.log(`Mutation API - M\xe9thode: ${t}, URL: ${e}, Data:`,r),u(!0),l(null);let a=0;try{for(;a<=1;)try{console.log(`Mutation API - Tentative ${a+1}/2`);let n=new AbortController,l=setTimeout(()=>n.abort(),1e4),i=await fetch(e,{method:t,headers:{"Content-Type":"application/json"},body:r?JSON.stringify(r):void 0,signal:n.signal,cache:"no-cache"});if(clearTimeout(l),console.log(`Mutation API - Statut de la r\xe9ponse: ${i.status}`),!i.ok){if(i.status>=500&&a<1){console.log(`Mutation API - Erreur ${i.status}, nouvelle tentative...`),a++,await o(1e3);continue}let e=await i.json().catch(()=>({}));throw console.log(`Mutation API - Donn\xe9es d'erreur:`,e),Error(e.error||`Erreur ${i.status}: ${i.statusText}`)}let u=await i.json();return console.log(`Mutation API - R\xe9sultat:`,u),s(u),e.includes("/tickets")&&(console.log("Mutation API - Invalidation du cache pour /api/tickets"),c("/api/tickets"),"DELETE"===t&&(console.log(`Mutation API - Invalidation du cache pour ${e}`),c(e))),u}catch(t){if(t instanceof DOMException&&"AbortError"===t.name)throw Error("La requ\xeate a pris trop de temps");if(a<1)console.warn(`Tentative de mutation \xe9chou\xe9e pour ${e}. Nouvelle tentative...`),a++,await o(1e3);else throw t}throw Error("Toutes les tentatives ont \xe9chou\xe9")}catch(e){throw console.error("Mutation API - Erreur:",e),e instanceof TypeError&&e.message.includes("fetch")?l("Probl\xe8me de connexion au serveur. Veuillez v\xe9rifier votre connexion internet."):l(e instanceof Error?e.message:"Une erreur est survenue"),e}finally{u(!1)}},[e,t]),data:r,error:n,loading:i}}}};