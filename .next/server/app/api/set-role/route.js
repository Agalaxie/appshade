"use strict";(()=>{var e={};e.id=5258,e.ids=[5258],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},35816:e=>{e.exports=require("process")},6162:e=>{e.exports=require("worker_threads")},72254:e=>{e.exports=require("node:buffer")},6005:e=>{e.exports=require("node:crypto")},87561:e=>{e.exports=require("node:fs")},88849:e=>{e.exports=require("node:http")},22286:e=>{e.exports=require("node:https")},87503:e=>{e.exports=require("node:net")},49411:e=>{e.exports=require("node:path")},97742:e=>{e.exports=require("node:process")},84492:e=>{e.exports=require("node:stream")},72477:e=>{e.exports=require("node:stream/web")},41041:e=>{e.exports=require("node:url")},47261:e=>{e.exports=require("node:util")},65628:e=>{e.exports=require("node:zlib")},10039:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>q,patchFetch:()=>f,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>c,staticGenerationAsyncStorage:()=>x});var s={};t.r(s),t.d(s,{POST:()=>p});var o=t(49303),i=t(88716),u=t(60670),n=t(99744),a=t(87070);async function p(e){try{let{userId:r,role:t}=await e.json();if(!r||!t)return a.NextResponse.json({error:"userId et role sont requis"},{status:400});if("admin"!==t&&"client"!==t)return a.NextResponse.json({error:"Le r\xf4le doit \xeatre 'admin' ou 'client'"},{status:400});let s=(await n.Ns.users.getUser(r)).publicMetadata||{},o=[...s.roles||[]];return o.includes(t)||o.push(t),await n.Ns.users.updateUser(r,{publicMetadata:{...s,roles:o}}),a.NextResponse.json({success:!0,message:`R\xf4le ${t} attribu\xe9 \xe0 l'utilisateur`,roles:o})}catch(e){return console.error("Erreur lors de la d\xe9finition du r\xf4le:",e),a.NextResponse.json({error:"Erreur lors de la d\xe9finition du r\xf4le"},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/set-role/route",pathname:"/api/set-role",filename:"route",bundlePath:"app/api/set-role/route"},resolvedPagePath:"C:\\Users\\audif\\Desktop\\appshade\\src\\app\\api\\set-role\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:x,serverHooks:c}=d,q="/api/set-role/route";function f(){return(0,u.patchFetch)({serverHooks:c,staticGenerationAsyncStorage:x})}},99744:(e,r,t)=>{t.d(r,{Ns:()=>i});var s=t(52434),o=t(42089);let i=(0,s.gq)({apiKey:o.$h,secretKey:o.Cn,apiUrl:o.T5,apiVersion:o.Gn,userAgent:"@clerk/nextjs@4.30.0",proxyUrl:o.NM,domain:o.yK,isSatellite:o.lo})},49303:(e,r,t)=>{e.exports=t(30517)}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[2510,4140],()=>t(10039));module.exports=s})();