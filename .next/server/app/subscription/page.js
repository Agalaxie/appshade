(()=>{var e={};e.id=1930,e.ids=[1930],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},92048:e=>{"use strict";e.exports=require("fs")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},6162:e=>{"use strict";e.exports=require("worker_threads")},71568:e=>{"use strict";e.exports=require("zlib")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},87561:e=>{"use strict";e.exports=require("node:fs")},88849:e=>{"use strict";e.exports=require("node:http")},22286:e=>{"use strict";e.exports=require("node:https")},87503:e=>{"use strict";e.exports=require("node:net")},49411:e=>{"use strict";e.exports=require("node:path")},97742:e=>{"use strict";e.exports=require("node:process")},84492:e=>{"use strict";e.exports=require("node:stream")},72477:e=>{"use strict";e.exports=require("node:stream/web")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},65628:e=>{"use strict";e.exports=require("node:zlib")},55191:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>l,routeModule:()=>m,tree:()=>c}),t(9797),t(37877),t(35866);var s=t(23191),a=t(88716),i=t(37922),n=t.n(i),o=t(95231),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);t.d(r,d);let c=["",{children:["subscription",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9797)),"C:\\Users\\audif\\Desktop\\appshade\\src\\app\\subscription\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,37877)),"C:\\Users\\audif\\Desktop\\appshade\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],l=["C:\\Users\\audif\\Desktop\\appshade\\src\\app\\subscription\\page.tsx"],u="/subscription/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/subscription/page",pathname:"/subscription",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},80168:(e,r,t)=>{Promise.resolve().then(t.bind(t,21269))},21269:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>m});var s=t(10326),a=t(17577),i=t(29752),n=t(91664),o=t(38443),d=t(32933),c=t(65120),l=t(35047),u=t(85999);let p=[{id:"basic",name:"Basic",price:"29.99",features:["Jusqu'\xe0 5 utilisateurs","Jusqu'\xe0 20 tickets par mois","Support par email","Temps de r\xe9ponse sous 24h"],recommended:!1},{id:"pro",name:"Pro",price:"59.99",features:["Jusqu'\xe0 15 utilisateurs","Tickets illimit\xe9s","Support par email et t\xe9l\xe9phone","Temps de r\xe9ponse sous 12h","Tableau de bord avanc\xe9"],recommended:!0},{id:"enterprise",name:"Enterprise",price:"99.99",features:["Utilisateurs illimit\xe9s","Tickets illimit\xe9s","Support prioritaire 24/7","Temps de r\xe9ponse sous 4h","Tableau de bord avanc\xe9","API personnalis\xe9e","Formation d\xe9di\xe9e"],recommended:!1}];function m(){let[e,r]=(0,a.useState)(null),[t,m]=(0,a.useState)(!1),x=(0,l.useRouter)(),f=e=>{r(e),m(!0)},h=async r=>{try{(await fetch("/api/subscriptions/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:e,planName:p.find(r=>r.id===e)?.name,paymentDetails:r})})).ok?(u.Am.success("Abonnement activ\xe9 avec succ\xe8s !"),x.push("/dashboard")):u.Am.error("Erreur lors de l'activation de l'abonnement")}catch(e){console.error("Erreur:",e),u.Am.error("Une erreur est survenue")}},b=p.find(r=>r.id===e);return(0,s.jsxs)("div",{className:"container max-w-6xl py-12",children:[(0,s.jsxs)("div",{className:"text-center mb-10",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Choisissez votre plan"}),s.jsx("p",{className:"text-muted-foreground",children:"S\xe9lectionnez le plan qui correspond le mieux \xe0 vos besoins"})]}),t?s.jsx("div",{className:"max-w-md mx-auto",children:(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{children:[(0,s.jsxs)(i.ll,{children:["Paiement pour ",b?.name]}),(0,s.jsxs)(i.SZ,{children:["Montant: ",b?.price,"€ / mois"]})]}),s.jsx(i.aY,{children:s.jsx(c.s,{amount:b?.price||"0",description:`Abonnement ${b?.name} - AppShade`,onSuccess:h,onError:()=>u.Am.error("Erreur lors du paiement")})}),s.jsx(i.eW,{className:"flex justify-between",children:s.jsx(n.z,{variant:"ghost",onClick:()=>m(!1),children:"Retour"})})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:p.map(e=>(0,s.jsxs)(i.Zb,{className:`flex flex-col ${e.recommended?"border-primary shadow-lg":""}`,children:[(0,s.jsxs)(i.Ol,{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[s.jsx(i.ll,{children:e.name}),e.recommended&&s.jsx(o.C,{className:"bg-primary text-primary-foreground",children:"Recommand\xe9"})]}),(0,s.jsxs)(i.SZ,{children:[(0,s.jsxs)("span",{className:"text-3xl font-bold",children:[e.price,"€"]})," / mois"]})]}),s.jsx(i.aY,{className:"flex-grow",children:s.jsx("ul",{className:"space-y-2",children:e.features.map((e,r)=>(0,s.jsxs)("li",{className:"flex items-start",children:[s.jsx(d.Z,{className:"h-5 w-5 text-primary mr-2 shrink-0"}),s.jsx("span",{children:e})]},r))})}),s.jsx(i.eW,{children:s.jsx(n.z,{className:"w-full",variant:e.recommended?"default":"outline",onClick:()=>f(e.id),children:"S\xe9lectionner"})})]},e.id))})]})}},65120:(e,r,t)=>{"use strict";t.d(r,{s:()=>o});var s=t(10326),a=t(17577),i=t(37865),n=t(59033);function o({amount:e,description:r,onSuccess:t,onError:o}){let[d,c]=(0,a.useState)(!0),l=async(r,s)=>{try{let a=await s.order.capture();(0,n.Am)({title:"Paiement r\xe9ussi !",description:"Votre paiement a \xe9t\xe9 trait\xe9 avec succ\xe8s."});try{await fetch("/api/payments/record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paypalOrderId:r.orderID,details:a,amount:e,currency:"EUR"})})}catch(e){console.error("Erreur lors de l'enregistrement du paiement:",e)}t&&t(a)}catch(e){console.error("Erreur lors de la capture du paiement:",e),(0,n.Am)({title:"Erreur",description:"Une erreur est survenue lors du paiement",variant:"destructive"}),o&&o(e)}};return s.jsx(i.Vv,{options:{clientId:"sb",currency:"EUR",intent:"capture"},children:(0,s.jsxs)("div",{className:"w-full max-w-md mx-auto",children:[d&&s.jsx("div",{className:"flex justify-center items-center py-2",children:s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}),s.jsx(i.ch,{style:{layout:"vertical",color:"gold",shape:"rect",label:"pay"},createOrder:(t,s)=>s.order.create({purchase_units:[{description:r,amount:{value:e,currency_code:"EUR"}}],application_context:{shipping_preference:"NO_SHIPPING"}}),onApprove:l,onError:e=>{console.error("Erreur PayPal:",e),(0,n.Am)({title:"Erreur PayPal",description:"Une erreur est survenue avec PayPal",variant:"destructive"}),o&&o(e)},onCancel:()=>(0,n.Am)({title:"Information",description:"Paiement annul\xe9"}),onInit:()=>c(!1)})]})})}},38443:(e,r,t)=>{"use strict";t.d(r,{C:()=>o});var s=t(10326);t(17577);var a=t(79360),i=t(51223);let n=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:r,...t}){return s.jsx("div",{className:(0,i.cn)(n({variant:r}),e),...t})}},29752:(e,r,t)=>{"use strict";t.d(r,{Ol:()=>o,SZ:()=>c,Zb:()=>n,aY:()=>l,eW:()=>u,ll:()=>d});var s=t(10326),a=t(17577),i=t(51223);let n=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));n.displayName="Card";let o=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...r}));o.displayName="CardHeader";let d=a.forwardRef(({className:e,...r},t)=>s.jsx("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));d.displayName="CardTitle";let c=a.forwardRef(({className:e,...r},t)=>s.jsx("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...r}));c.displayName="CardDescription";let l=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("p-6 pt-0",e),...r}));l.displayName="CardContent";let u=a.forwardRef(({className:e,...r},t)=>s.jsx("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",e),...r}));u.displayName="CardFooter"},59033:(e,r,t)=>{"use strict";t.d(r,{Am:()=>u,pm:()=>p});var s=t(17577);let a=0,i=new Map,n=e=>{if(i.has(e))return;let r=setTimeout(()=>{i.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,r)},o=(e,r)=>{switch(r.type){case"ADD_TOAST":return{...e,toasts:[r.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===r.toast.id?{...e,...r.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=r;return t?n(t):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===r.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==r.toastId)}}},d=[],c={toasts:[]};function l(e){c=o(c,e),d.forEach(e=>{e(c)})}function u({...e}){let r=(a=(a+1)%Number.MAX_VALUE).toString(),t=()=>l({type:"DISMISS_TOAST",toastId:r});return l({type:"ADD_TOAST",toast:{...e,id:r,open:!0,onOpenChange:e=>{e||t()}}}),{id:r,dismiss:t,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function p(){let[e,r]=s.useState(c);return s.useEffect(()=>(d.push(r),()=>{let e=d.indexOf(r);e>-1&&d.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}},9797:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(68570).createProxy)(String.raw`C:\Users\audif\Desktop\appshade\src\app\subscription\page.tsx#default`)}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[2510,4140,2497,4661,7865,2255],()=>t(55191));module.exports=s})();