"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7895],{47895:function(e,t,a){a.d(t,{g:function(){return N}});var s=a(57437),n=a(2265),r=a(27648),i=a(99376),l=a(93448),o=a(38691),d=a(95080),c=a(99637),u=a(95805),m=a(53417),f=a(46221),x=a(98728),p=a(50912),h=a(84071);function j(e){let{href:t,icon:a,title:n,isActive:i}=e;return(0,s.jsxs)(r.default,{href:t,className:(0,l.cn)("flex items-center gap-3 rounded-md px-3 py-2 text-sm transition-colors",i?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[a,(0,s.jsx)("span",{className:"transition-opacity duration-300 group-data-[collapsed=true]:opacity-0 overflow-hidden",children:n})]})}function N(){var e;let t=(0,i.usePathname)(),{user:a}=(0,p.aF)(),{isAdmin:l,loading:N}=function(){let{user:e,isLoaded:t}=(0,p.aF)(),[a,s]=(0,n.useState)([]),[r,i]=(0,n.useState)(!1),[l,o]=(0,n.useState)(!1),[d,c]=(0,n.useState)(!0),[u,m]=(0,n.useState)({});return(0,n.useEffect)(()=>{if(t&&e){var a,n;let t=(null===(a=e.publicMetadata)||void 0===a?void 0:a.roles)||[],r={userId:e.id,email:null===(n=e.primaryEmailAddress)||void 0===n?void 0:n.emailAddress,publicMetadata:e.publicMetadata,roles:t,hasRoles:Array.isArray(t)&&t.length>0};console.log("useRoles - Informations utilisateur:",r),m(r),s(t),i(Array.isArray(t)&&t.includes("admin")),o(Array.isArray(t)&&t.includes("client")),c(!1)}else t&&!e&&(s([]),i(!1),o(!1),c(!1),m({status:"not-authenticated"}))},[t,e]),{roles:a,isAdmin:r,isClient:l,loading:d,debug:u}}();return N?(0,s.jsx)("div",{children:"Chargement..."}):l?(0,s.jsx)(o.YE,{className:"min-h-screen border-r",children:(0,s.jsxs)("div",{className:"flex h-full flex-col",children:[(0,s.jsx)("div",{className:"flex h-16 items-center border-b px-4",children:(0,s.jsxs)(r.default,{href:"/admin",className:"flex items-center gap-2 font-semibold",children:[(0,s.jsx)(d.Z,{className:"h-6 w-6 text-primary"}),(0,s.jsx)("span",{className:"transition-opacity duration-300 group-data-[collapsed=true]:opacity-0 overflow-hidden",children:"Admin Panel"})]})}),(0,s.jsxs)("nav",{className:"flex-1 space-y-1 p-2",children:[(0,s.jsx)(j,{href:"/admin",icon:(0,s.jsx)(c.Z,{className:"h-4 w-4"}),title:"Dashboard",isActive:"/admin"===t}),(0,s.jsx)(j,{href:"/admin/tickets",icon:(0,s.jsx)(d.Z,{className:"h-4 w-4"}),title:"Tickets",isActive:t.includes("/admin/tickets")}),(0,s.jsx)(j,{href:"/admin/users",icon:(0,s.jsx)(u.Z,{className:"h-4 w-4"}),title:"Utilisateurs",isActive:t.includes("/admin/users")}),(0,s.jsx)(j,{href:"/admin/messages",icon:(0,s.jsx)(m.Z,{className:"h-4 w-4"}),title:"Messages",isActive:t.includes("/admin/messages")}),(0,s.jsx)(j,{href:"/admin/analytics",icon:(0,s.jsx)(f.Z,{className:"h-4 w-4"}),title:"Analytiques",isActive:t.includes("/admin/analytics")}),(0,s.jsx)(j,{href:"/admin/settings",icon:(0,s.jsx)(x.Z,{className:"h-4 w-4"}),title:"Param\xe8tres",isActive:t.includes("/admin/settings")})]}),(0,s.jsx)("div",{className:"mt-auto border-t p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(p.l8,{afterSignOutUrl:"/"}),(0,s.jsxs)("div",{className:"text-sm transition-opacity duration-300 group-data-[collapsed=true]:opacity-0 overflow-hidden",children:[(0,s.jsx)("p",{className:"font-medium",children:(null==a?void 0:a.firstName)||"Admin"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:null==a?void 0:null===(e=a.emailAddresses[0])||void 0===e?void 0:e.emailAddress})]})]}),(0,s.jsx)("div",{className:"transition-opacity duration-300 group-data-[collapsed=true]:absolute group-data-[collapsed=true]:bottom-4 group-data-[collapsed=true]:left-1/2 group-data-[collapsed=true]:transform group-data-[collapsed=true]:-translate-x-1/2",children:(0,s.jsx)(h.T,{})})]})})]})}):(0,s.jsx)("div",{children:"Acc\xe8s non autoris\xe9"})}},84071:function(e,t,a){a.d(t,{T:function(){return N}});var s=a(57437),n=a(2265),r=a(85929),i=a(97226),l=a(25922),o=a(12381),d=a(70085),c=a(10407),u=a(30401),m=a(40519),f=a(93448);let x=d.fC,p=d.xz;d.ZA,d.Uv,d.Tr,d.Ee,n.forwardRef((e,t)=>{let{className:a,inset:n,children:r,...i}=e;return(0,s.jsxs)(d.fF,{ref:t,className:(0,f.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",n&&"pl-8",a),...i,children:[r,(0,s.jsx)(c.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=d.fF.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(d.tu,{ref:t,className:(0,f.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})}).displayName=d.tu.displayName;let h=n.forwardRef((e,t)=>{let{className:a,sideOffset:n=4,...r}=e;return(0,s.jsx)(d.Uv,{children:(0,s.jsx)(d.VY,{ref:t,sideOffset:n,className:(0,f.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})})});h.displayName=d.VY.displayName;let j=n.forwardRef((e,t)=>{let{className:a,inset:n,...r}=e;return(0,s.jsx)(d.ck,{ref:t,className:(0,f.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n&&"pl-8",a),...r})});function N(){let{setTheme:e,theme:t}=(0,l.F)();return(0,s.jsxs)(x,{children:[(0,s.jsx)(p,{asChild:!0,children:(0,s.jsxs)(o.z,{variant:"outline",size:"icon",className:"border-none",children:[(0,s.jsx)(r.Z,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,s.jsx)(i.Z,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,s.jsx)("span",{className:"sr-only",children:"Changer de th\xe8me"})]})}),(0,s.jsxs)(h,{align:"end",children:[(0,s.jsx)(j,{onClick:()=>e("light"),children:"Clair"}),(0,s.jsx)(j,{onClick:()=>e("dark"),children:"Sombre"}),(0,s.jsx)(j,{onClick:()=>e("system"),children:"Syst\xe8me"})]})]})}j.displayName=d.ck.displayName,n.forwardRef((e,t)=>{let{className:a,children:n,checked:r,...i}=e;return(0,s.jsxs)(d.oC,{ref:t,className:(0,f.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:r,...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(d.wU,{children:(0,s.jsx)(u.Z,{className:"h-4 w-4"})})}),n]})}).displayName=d.oC.displayName,n.forwardRef((e,t)=>{let{className:a,children:n,...r}=e;return(0,s.jsxs)(d.Rk,{ref:t,className:(0,f.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(d.wU,{children:(0,s.jsx)(m.Z,{className:"h-2 w-2 fill-current"})})}),n]})}).displayName=d.Rk.displayName,n.forwardRef((e,t)=>{let{className:a,inset:n,...r}=e;return(0,s.jsx)(d.__,{ref:t,className:(0,f.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",a),...r})}).displayName=d.__.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(d.Z0,{ref:t,className:(0,f.cn)("-mx-1 my-1 h-px bg-muted",a),...n})}).displayName=d.Z0.displayName},38691:function(e,t,a){a.d(t,{Hn:function(){return l},YE:function(){return d},kV:function(){return c},vP:function(){return u}});var s=a(57437),n=a(2265),r=a(93448);let i=n.createContext({collapsed:!1,setCollapsed:()=>{},collapsible:"none"});function l(e){let{children:t,defaultCollapsed:a=!1,collapsible:r="expanded"}=e,[l,o]=n.useState(a);return(0,s.jsx)(i.Provider,{value:{collapsed:l,setCollapsed:o,collapsible:r},children:(0,s.jsx)("div",{className:"group/sidebar-wrapper flex h-full","data-collapsible":r,children:t})})}function o(){let e=n.useContext(i);if(!e)throw Error("useSidebar must be used within a SidebarProvider");return e}function d(e){let{children:t,className:a,...n}=e,{collapsed:i,collapsible:l}=o();return(0,s.jsx)("div",{"data-collapsed":i,"data-state":i?"closed":"open",className:(0,r.cn)("group flex h-full flex-col overflow-hidden border-r bg-background transition-[width] duration-300 ease-in-out",i&&"expanded"===l?"w-16":"w-64",a),...n,children:t})}function c(e){let{children:t,className:a,...n}=e;return(0,s.jsx)("div",{className:(0,r.cn)("flex h-full flex-1 flex-col overflow-auto",a),...n,children:t})}function u(e){let{className:t,...a}=e,{collapsed:n,setCollapsed:i,collapsible:l}=o();return"none"===l?null:(0,s.jsxs)("button",{type:"button",className:(0,r.cn)("inline-flex h-8 w-8 items-center justify-center rounded-md text-muted-foreground transition-colors hover:text-foreground",t),onClick:()=>i(!n),...a,children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:[(0,s.jsx)("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),(0,s.jsx)("path",{d:"M9 3v18"})]}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle Sidebar"})]})}}}]);