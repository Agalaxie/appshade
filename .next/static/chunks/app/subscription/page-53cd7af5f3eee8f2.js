(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1930],{26938:function(e,r,t){Promise.resolve().then(t.bind(t,93629))},39763:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});var n=t(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,r)=>{let t=(0,n.forwardRef)((t,i)=>{let{color:o="currentColor",size:c=24,strokeWidth:u=2,absoluteStrokeWidth:l,className:d="",children:m,...f}=t;return(0,n.createElement)("svg",{ref:i,...a,width:c,height:c,stroke:o,strokeWidth:l?24*Number(u)/Number(c):u,className:["lucide","lucide-".concat(s(e)),d].join(" "),...f},[...r.map(e=>{let[r,t]=e;return(0,n.createElement)(r,t)}),...Array.isArray(m)?m:[m]])});return t.displayName="".concat(e),t}},30401:function(e,r,t){"use strict";t.d(r,{Z:function(){return n}});let n=(0,t(39763).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},99376:function(e,r,t){"use strict";var n=t(35475);t.o(n,"useParams")&&t.d(r,{useParams:function(){return n.useParams}}),t.o(n,"usePathname")&&t.d(r,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}}),t.o(n,"useSearchParams")&&t.d(r,{useSearchParams:function(){return n.useSearchParams}})},93629:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return f}});var n=t(57437),a=t(2265),s=t(79820),i=t(12381),o=t(69174),c=t(30401),u=t(23625),l=t(99376),d=t(14438);let m=[{id:"basic",name:"Basic",price:"29.99",features:["Jusqu'\xe0 5 utilisateurs","Jusqu'\xe0 20 tickets par mois","Support par email","Temps de r\xe9ponse sous 24h"],recommended:!1},{id:"pro",name:"Pro",price:"59.99",features:["Jusqu'\xe0 15 utilisateurs","Tickets illimit\xe9s","Support par email et t\xe9l\xe9phone","Temps de r\xe9ponse sous 12h","Tableau de bord avanc\xe9"],recommended:!0},{id:"enterprise",name:"Enterprise",price:"99.99",features:["Utilisateurs illimit\xe9s","Tickets illimit\xe9s","Support prioritaire 24/7","Temps de r\xe9ponse sous 4h","Tableau de bord avanc\xe9","API personnalis\xe9e","Formation d\xe9di\xe9e"],recommended:!1}];function f(){let[e,r]=(0,a.useState)(null),[t,f]=(0,a.useState)(!1),p=(0,l.useRouter)(),h=e=>{r(e),f(!0)},v=async r=>{try{var t;(await fetch("/api/subscriptions/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:e,planName:null===(t=m.find(r=>r.id===e))||void 0===t?void 0:t.name,paymentDetails:r})})).ok?(d.Am.success("Abonnement activ\xe9 avec succ\xe8s !"),p.push("/dashboard")):d.Am.error("Erreur lors de l'activation de l'abonnement")}catch(e){console.error("Erreur:",e),d.Am.error("Une erreur est survenue")}},x=m.find(r=>r.id===e);return(0,n.jsxs)("div",{className:"container max-w-6xl py-12",children:[(0,n.jsxs)("div",{className:"text-center mb-10",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Choisissez votre plan"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"S\xe9lectionnez le plan qui correspond le mieux \xe0 vos besoins"})]}),t?(0,n.jsx)("div",{className:"max-w-md mx-auto",children:(0,n.jsxs)(s.Zb,{children:[(0,n.jsxs)(s.Ol,{children:[(0,n.jsxs)(s.ll,{children:["Paiement pour ",null==x?void 0:x.name]}),(0,n.jsxs)(s.SZ,{children:["Montant: ",null==x?void 0:x.price,"€ / mois"]})]}),(0,n.jsx)(s.aY,{children:(0,n.jsx)(u.s,{amount:(null==x?void 0:x.price)||"0",description:"Abonnement ".concat(null==x?void 0:x.name," - AppShade"),onSuccess:v,onError:()=>d.Am.error("Erreur lors du paiement")})}),(0,n.jsx)(s.eW,{className:"flex justify-between",children:(0,n.jsx)(i.z,{variant:"ghost",onClick:()=>f(!1),children:"Retour"})})]})}):(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:m.map(e=>(0,n.jsxs)(s.Zb,{className:"flex flex-col ".concat(e.recommended?"border-primary shadow-lg":""),children:[(0,n.jsxs)(s.Ol,{children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)(s.ll,{children:e.name}),e.recommended&&(0,n.jsx)(o.C,{className:"bg-primary text-primary-foreground",children:"Recommand\xe9"})]}),(0,n.jsxs)(s.SZ,{children:[(0,n.jsxs)("span",{className:"text-3xl font-bold",children:[e.price,"€"]})," / mois"]})]}),(0,n.jsx)(s.aY,{className:"flex-grow",children:(0,n.jsx)("ul",{className:"space-y-2",children:e.features.map((e,r)=>(0,n.jsxs)("li",{className:"flex items-start",children:[(0,n.jsx)(c.Z,{className:"h-5 w-5 text-primary mr-2 shrink-0"}),(0,n.jsx)("span",{children:e})]},r))})}),(0,n.jsx)(s.eW,{children:(0,n.jsx)(i.z,{className:"w-full",variant:e.recommended?"default":"outline",onClick:()=>h(e.id),children:"S\xe9lectionner"})})]},e.id))})]})}},23625:function(e,r,t){"use strict";t.d(r,{s:function(){return o}});var n=t(57437),a=t(2265),s=t(61542),i=t(18536);function o(e){let{amount:r,description:t,onSuccess:o,onError:c}=e,[u,l]=(0,a.useState)(!0),d=async(e,t)=>{try{let n=await t.order.capture();(0,i.Am)({title:"Paiement r\xe9ussi !",description:"Votre paiement a \xe9t\xe9 trait\xe9 avec succ\xe8s."});try{await fetch("/api/payments/record",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paypalOrderId:e.orderID,details:n,amount:r,currency:"EUR"})})}catch(e){console.error("Erreur lors de l'enregistrement du paiement:",e)}o&&o(n)}catch(e){console.error("Erreur lors de la capture du paiement:",e),(0,i.Am)({title:"Erreur",description:"Une erreur est survenue lors du paiement",variant:"destructive"}),c&&c(e)}};return(0,n.jsx)(s.Vv,{options:{clientId:"sb",currency:"EUR",intent:"capture"},children:(0,n.jsxs)("div",{className:"w-full max-w-md mx-auto",children:[u&&(0,n.jsx)("div",{className:"flex justify-center items-center py-2",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})}),(0,n.jsx)(s.ch,{style:{layout:"vertical",color:"gold",shape:"rect",label:"pay"},createOrder:(e,n)=>n.order.create({purchase_units:[{description:t,amount:{value:r,currency_code:"EUR"}}],application_context:{shipping_preference:"NO_SHIPPING"}}),onApprove:d,onError:e=>{console.error("Erreur PayPal:",e),(0,i.Am)({title:"Erreur PayPal",description:"Une erreur est survenue avec PayPal",variant:"destructive"}),c&&c(e)},onCancel:()=>(0,i.Am)({title:"Information",description:"Paiement annul\xe9"}),onInit:()=>l(!1)})]})})}},69174:function(e,r,t){"use strict";t.d(r,{C:function(){return o}});var n=t(57437);t(2265);var a=t(90535),s=t(93448);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:r,variant:t,...a}=e;return(0,n.jsx)("div",{className:(0,s.cn)(i({variant:t}),r),...a})}},12381:function(e,r,t){"use strict";t.d(r,{z:function(){return u}});var n=t(57437),a=t(2265),s=t(37053),i=t(90535),o=t(93448);let c=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),u=a.forwardRef((e,r)=>{let{className:t,variant:a,size:i,asChild:u=!1,...l}=e,d=u?s.g7:"button";return(0,n.jsx)(d,{className:(0,o.cn)(c({variant:a,size:i,className:t})),ref:r,...l})});u.displayName="Button"},79820:function(e,r,t){"use strict";t.d(r,{Ol:function(){return o},SZ:function(){return u},Zb:function(){return i},aY:function(){return l},eW:function(){return d},ll:function(){return c}});var n=t(57437),a=t(2265),s=t(93448);let i=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});i.displayName="Card";let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...a})});o.displayName="CardHeader";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("h3",{ref:r,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});c.displayName="CardTitle";let u=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",t),...a})});u.displayName="CardDescription";let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",t),...a})});l.displayName="CardContent";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,n.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",t),...a})});d.displayName="CardFooter"},18536:function(e,r,t){"use strict";t.d(r,{Am:function(){return d},pm:function(){return m}});var n=t(2265);let a=0,s=new Map,i=e=>{if(s.has(e))return;let r=setTimeout(()=>{s.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,r)},o=(e,r)=>{switch(r.type){case"ADD_TOAST":return{...e,toasts:[r.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===r.toast.id?{...e,...r.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=r;return t?i(t):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===r.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==r.toastId)}}},c=[],u={toasts:[]};function l(e){u=o(u,e),c.forEach(e=>{e(u)})}function d(e){let{...r}=e,t=(a=(a+1)%Number.MAX_VALUE).toString(),n=()=>l({type:"DISMISS_TOAST",toastId:t});return l({type:"ADD_TOAST",toast:{...r,id:t,open:!0,onOpenChange:e=>{e||n()}}}),{id:t,dismiss:n,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,r]=n.useState(u);return n.useEffect(()=>(c.push(r),()=>{let e=c.indexOf(r);e>-1&&c.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}},93448:function(e,r,t){"use strict";t.d(r,{cn:function(){return s},o:function(){return o},p:function(){return i}});var n=t(61994),a=t(53335);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.m6)((0,n.W)(r))}function i(e){try{let r=new Date(e);if(isNaN(r.getTime()))return"Date invalide";return new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(r)}catch(r){return console.error("Erreur de formatage de date:",r,e),"Date invalide"}}function o(e){try{let r=new Date(e);if(isNaN(r.getTime()))return"Date invalide";let t=new Date().getTime()-r.getTime(),n=Math.floor(t/6e4),a=Math.floor(t/36e5),s=Math.floor(t/864e5);if(n<60)return"Il y a ".concat(n," minute").concat(n>1?"s":"");if(a<24)return"Il y a ".concat(a," heure").concat(a>1?"s":"");if(s<7)return"Il y a ".concat(s," jour").concat(s>1?"s":"");return new Intl.DateTimeFormat("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(r)}catch(r){return console.error("Erreur de formatage de date:",r,e),"Date invalide"}}},90535:function(e,r,t){"use strict";t.d(r,{j:function(){return i}});var n=t(61994);let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,s=n.W,i=(e,r)=>t=>{var n;if((null==r?void 0:r.variants)==null)return s(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:i,defaultVariants:o}=r,c=Object.keys(i).map(e=>{let r=null==t?void 0:t[e],n=null==o?void 0:o[e];if(null===r)return null;let s=a(r)||a(n);return i[e][s]}),u=t&&Object.entries(t).reduce((e,r)=>{let[t,n]=r;return void 0===n||(e[t]=n),e},{});return s(e,c,null==r?void 0:null===(n=r.compoundVariants)||void 0===n?void 0:n.reduce((e,r)=>{let{class:t,className:n,...a}=r;return Object.entries(a).every(e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...o,...u}[r]):({...o,...u})[r]===t})?[...e,t,n]:e},[]),null==t?void 0:t.class,null==t?void 0:t.className)}}},function(e){e.O(0,[7317,4438,1542,2971,2117,1744],function(){return e(e.s=26938)}),_N_E=e.O()}]);