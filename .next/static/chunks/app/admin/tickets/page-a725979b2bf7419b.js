(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5314],{76149:function(e,t,r){Promise.resolve().then(r.bind(r,98293))},46221:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(39763).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},90740:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(39763).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},56266:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(39763).Z)("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},82431:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(39763).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},73247:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(39763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},98728:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(39763).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},95805:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(39763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},98293:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var n=r(57437),s=r(2265),a=r(27648),l=r(47895),i=r(38691),d=r(12381),c=r(40279),o=r(69174),m=r(51849),u=r(73247),f=r(82431),x=r(90740),h=r(56266),g=r(40282),p=r(59226),b=r(69140),j=r(93448);function N(){let[e,t]=(0,s.useState)(""),[r,N]=(0,s.useState)("all"),[v,y]=(0,s.useState)(0),{data:k,error:w,loading:C,refetch:O}=(0,g.h_)("/api/tickets",{refreshInterval:null}),R=k?k.filter(t=>{var n,s,a;let l=(null===(n=t.title)||void 0===n?void 0:n.toLowerCase().includes(e.toLowerCase()))||(null===(s=t.id)||void 0===s?void 0:s.toLowerCase().includes(e.toLowerCase()))||(null===(a=t.clientName)||void 0===a?void 0:a.toLowerCase().includes(e.toLowerCase()))||!1,i="all"===r||t.status===r;return l&&i}):[];return(0,n.jsxs)(i.Hn,{children:[(0,n.jsx)(l.g,{}),(0,n.jsxs)(i.kV,{children:[(0,n.jsxs)("header",{className:"flex h-16 shrink-0 items-center justify-between gap-2 border-b px-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(i.vP,{}),(0,n.jsx)("h1",{className:"text-xl font-semibold",children:"Tous les tickets"})]}),(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsxs)(o.C,{variant:"outline",className:"font-normal",children:[R.length," tickets"]})})]}),(0,n.jsxs)("div",{className:"flex-1 overflow-auto p-4",children:[(0,n.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[(0,n.jsxs)("div",{className:"flex flex-col md:flex-row gap-2 items-start md:items-center",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(u.Z,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,n.jsx)(c.I,{placeholder:"Rechercher un ticket...",className:"w-full md:w-auto pl-8",value:e,onChange:e=>t(e.target.value)})]}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,n.jsx)(d.z,{variant:"outline",size:"sm",onClick:()=>N("all"),className:"all"===r?"bg-primary text-primary-foreground":"",children:"Tous"}),(0,n.jsx)(d.z,{variant:"outline",size:"sm",onClick:()=>N("open"),className:"open"===r?"bg-primary text-primary-foreground":"",children:"En attente"}),(0,n.jsx)(d.z,{variant:"outline",size:"sm",onClick:()=>N("in_progress"),className:"in_progress"===r?"bg-primary text-primary-foreground":"",children:"En cours"}),(0,n.jsx)(d.z,{variant:"outline",size:"sm",onClick:()=>N("closed"),className:"closed"===r?"bg-primary text-primary-foreground":"",children:"Ferm\xe9s"})]})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsxs)(d.z,{variant:"outline",size:"sm",onClick:()=>{p.kg.debug("Rafra\xeechissement manuel des tickets admin"),y(e=>e+1),O()},className:"flex items-center gap-1",children:[(0,n.jsx)(f.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"hidden md:inline",children:"Actualiser"})]}),(0,n.jsxs)(d.z,{variant:"outline",size:"sm",className:"flex items-center gap-1",children:[(0,n.jsx)(x.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"hidden md:inline",children:"Filtres avanc\xe9s"})]})]})]}),(0,n.jsx)("div",{className:"rounded-md border overflow-hidden",children:(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full",children:[(0,n.jsx)("thead",{className:"bg-muted/50",children:(0,n.jsxs)("tr",{className:"hidden md:table-row",children:[(0,n.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"ID"}),(0,n.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Titre"}),(0,n.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Client"}),(0,n.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Statut"}),(0,n.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Priorit\xe9"}),(0,n.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Date"}),(0,n.jsx)("th",{className:"h-12 px-4 text-left align-middle font-medium text-muted-foreground",children:"Actions"})]})}),(0,n.jsx)("tbody",{children:C?Array.from({length:5}).map((e,t)=>(0,n.jsxs)("tr",{className:"border-t",children:[(0,n.jsx)("td",{className:"p-4 align-middle",children:(0,n.jsx)(b.O,{className:"h-4 w-[40px]"})}),(0,n.jsx)("td",{className:"p-4 align-middle",children:(0,n.jsx)(b.O,{className:"h-4 w-[200px]"})}),(0,n.jsx)("td",{className:"p-4 align-middle",children:(0,n.jsx)(b.O,{className:"h-4 w-[120px]"})}),(0,n.jsx)("td",{className:"p-4 align-middle",children:(0,n.jsx)(b.O,{className:"h-4 w-[80px]"})}),(0,n.jsx)("td",{className:"p-4 align-middle",children:(0,n.jsx)(b.O,{className:"h-4 w-[80px]"})}),(0,n.jsx)("td",{className:"p-4 align-middle",children:(0,n.jsx)(b.O,{className:"h-4 w-[120px]"})}),(0,n.jsx)("td",{className:"p-4 align-middle",children:(0,n.jsx)(b.O,{className:"h-8 w-8 rounded-full"})})]},t)):w?(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:7,className:"p-4 text-center text-sm text-muted-foreground",children:"Une erreur est survenue lors du chargement des tickets"})}):0===R.length?(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:7,className:"p-4 text-center text-sm text-muted-foreground",children:"Aucun ticket trouv\xe9"})}):R.map(e=>{var t;return(0,n.jsxs)("tr",{className:"border-t hover:bg-muted/50 md:table-row flex flex-col p-4 md:p-0",children:[(0,n.jsxs)("td",{className:"md:p-4 md:align-middle md:table-cell flex justify-between items-center",children:[(0,n.jsx)("span",{className:"font-medium md:font-normal md:hidden",children:"ID:"}),(0,n.jsxs)("span",{children:["#",e.id.substring(0,8)]})]}),(0,n.jsxs)("td",{className:"md:p-4 md:align-middle md:table-cell flex justify-between items-center",children:[(0,n.jsx)("span",{className:"font-medium md:font-normal md:hidden",children:"Titre:"}),(0,n.jsx)(a.default,{href:"/admin/tickets/".concat(e.id),className:"font-medium hover:underline",children:e.title})]}),(0,n.jsxs)("td",{className:"md:p-4 md:align-middle md:table-cell flex justify-between items-center",children:[(0,n.jsx)("span",{className:"font-medium md:font-normal md:hidden",children:"Client:"}),(0,n.jsx)("span",{children:e.clientName||(null===(t=e.user)||void 0===t?void 0:t.firstName)||"Client"})]}),(0,n.jsxs)("td",{className:"md:p-4 md:align-middle md:table-cell flex justify-between items-center",children:[(0,n.jsx)("span",{className:"font-medium md:font-normal md:hidden",children:"Statut:"}),(0,n.jsx)(m.O,{status:e.status})]}),(0,n.jsxs)("td",{className:"md:p-4 md:align-middle md:table-cell flex justify-between items-center",children:[(0,n.jsx)("span",{className:"font-medium md:font-normal md:hidden",children:"Priorit\xe9:"}),(0,n.jsx)(o.C,{variant:"outline",className:(0,j.cn)("high"===e.priority?"border-red-500 text-red-500":"medium"===e.priority?"border-yellow-500 text-yellow-500":"border-green-500 text-green-500"),children:"high"===e.priority?"Haute":"medium"===e.priority?"Moyenne":"Basse"})]}),(0,n.jsxs)("td",{className:"md:p-4 md:align-middle md:table-cell flex justify-between items-center",children:[(0,n.jsx)("span",{className:"font-medium md:font-normal md:hidden",children:"Date:"}),(0,n.jsx)("span",{className:"text-sm text-muted-foreground",children:(0,j.p)(e.createdAt)})]}),(0,n.jsxs)("td",{className:"md:p-4 md:align-middle md:table-cell flex justify-between items-center",children:[(0,n.jsx)("span",{className:"font-medium md:font-normal md:hidden",children:"Actions:"}),(0,n.jsxs)(d.z,{variant:"ghost",size:"icon",children:[(0,n.jsx)(h.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Actions"})]})]})]},e.id)})})]})})})]})]})]})}},69174:function(e,t,r){"use strict";r.d(t,{C:function(){return i}});var n=r(57437);r(2265);var s=r(90535),a=r(93448);let l=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...s}=e;return(0,n.jsx)("div",{className:(0,a.cn)(l({variant:r}),t),...s})}},40279:function(e,t,r){"use strict";r.d(t,{I:function(){return l}});var n=r(57437),s=r(2265),a=r(93448);let l=s.forwardRef((e,t)=>{let{className:r,type:s,...l}=e;return(0,n.jsx)("input",{type:s,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...l})});l.displayName="Input"},69140:function(e,t,r){"use strict";r.d(t,{O:function(){return a}});var n=r(57437),s=r(93448);function a(e){let{className:t,...r}=e;return(0,n.jsx)("div",{className:(0,s.cn)("animate-pulse rounded-md bg-muted",t),...r})}},51849:function(e,t,r){"use strict";r.d(t,{O:function(){return a}});var n=r(57437);r(2265);var s=r(93448);function a(e){let{status:t,className:r,children:a,...l}=e;return(0,n.jsx)("span",{className:(0,s.cn)("inline-flex items-center rounded-md border px-2 py-1 text-xs font-medium",function(e){switch(e){case"open":case"En attente":case"backlog":return"bg-yellow-50 text-yellow-700 dark:bg-yellow-400/10 dark:text-yellow-400 border-yellow-300 dark:border-yellow-400/20";case"in_progress":case"En cours":case"in-progress":return"bg-blue-50 text-blue-700 dark:bg-blue-400/10 dark:text-blue-400 border-blue-300 dark:border-blue-400/20";case"closed":case"Ferm\xe9":case"done":return"bg-green-50 text-green-700 dark:bg-green-400/10 dark:text-green-400 border-green-300 dark:border-green-400/20";case"todo":default:return"bg-gray-50 text-gray-700 dark:bg-gray-400/10 dark:text-gray-400 border-gray-300 dark:border-gray-400/20";case"canceled":return"bg-red-50 text-red-700 dark:bg-red-400/10 dark:text-red-400 border-red-300 dark:border-red-400/20"}}(t),r),...l,children:a||t})}},59226:function(e,t,r){"use strict";var n,s;r.d(t,{kg:function(){return c}}),(s=n||(n={}))[s.DEBUG=0]="DEBUG",s[s.INFO=1]="INFO",s[s.WARN=2]="WARN",s[s.ERROR=3]="ERROR",s[s.NONE=4]="NONE";let a=3,l={},i=(e,t)=>"[".concat(e,"] ").concat(t),d=e=>{let t=Date.now();if(!l[e])return l[e]={count:1,lastTime:t},!1;let r=l[e];return t-r.lastTime>1e4?(l[e]={count:1,lastTime:t},!1):(r.count++,10===r.count)?(r.lastTime=t,!1):1!==r.count},c={setLogLevel:e=>{a=e},getLogLevel:()=>a,debug:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(a<=0){let t="DEBUG:".concat(e);if(!d(t)){let n=l[t];console.debug(i("DEBUG",e+(n&&n.count>1?" (r\xe9p\xe9t\xe9 ".concat(n.count," fois)"):"")),...r)}}},info:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(a<=1){let t="INFO:".concat(e);if(!d(t)){let n=l[t];console.info(i("INFO",e+(n&&n.count>1?" (r\xe9p\xe9t\xe9 ".concat(n.count," fois)"):"")),...r)}}},warn:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(a<=2){let t="WARN:".concat(e);if(!d(t)){let n=l[t];console.warn(i("WARN",e+(n&&n.count>1?" (r\xe9p\xe9t\xe9 ".concat(n.count," fois)"):"")),...r)}}},error:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(a<=3){let t="ERROR:".concat(e);if(!d(t)){let n=l[t];console.error(i("ERROR",e+(n&&n.count>1?" (r\xe9p\xe9t\xe9 ".concat(n.count," fois)"):"")),...r)}}},once:function(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),s=2;s<r;s++)n[s-2]=arguments[s];let a="ONCE:".concat(t);if(!l[a])switch(l[a]={count:1,lastTime:Date.now()},e){case 0:c.debug(t,...n);break;case 1:c.info(t,...n);break;case 2:c.warn(t,...n);break;case 3:c.error(t,...n)}}};t.ZP=c}},function(e){e.O(0,[7317,912,2972,7861,9041,2556,9991,7895,2971,2117,1744],function(){return e(e.s=76149)}),_N_E=e.O()}]);