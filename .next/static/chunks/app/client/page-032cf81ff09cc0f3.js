(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8394],{82799:function(e,s,t){Promise.resolve().then(t.bind(t,56566))},91723:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});let l=(0,t(39763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},92369:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});let l=(0,t(39763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},56566:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return f}});var l=t(57437);t(2265);var r=t(27648),n=t(5090),c=t(38691),a=t(79820),d=t(95080),i=t(53417),x=t(91723),o=t(40282),m=t(93448),u=t(69140);function f(){var e;let{data:s,loading:t,error:f}=(0,o.h_)("/api/tickets"),h=(null==s?void 0:null===(e=s.filter(e=>"closed"!==e.status))||void 0===e?void 0:e.length)||0,j=(null==s?void 0:s.reduce((e,s)=>{var t,l;return e+((null===(l=s.messages)||void 0===l?void 0:null===(t=l.filter(e=>!e.read))||void 0===t?void 0:t.length)||0)},0))||0;return(0,l.jsxs)(c.Hn,{defaultCollapsed:!1,collapsible:"expanded",children:[(0,l.jsx)(n.X,{}),(0,l.jsxs)(c.kV,{children:[(0,l.jsx)("header",{className:"flex h-16 shrink-0 items-center gap-2 border-b",children:(0,l.jsxs)("div",{className:"flex items-center gap-2 px-4",children:[(0,l.jsx)(c.vP,{}),(0,l.jsx)("h1",{className:"text-xl font-semibold",children:"Tableau de bord"})]})}),(0,l.jsxs)("div",{className:"flex flex-1 flex-col gap-4 p-4",children:[(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,l.jsxs)(a.Zb,{children:[(0,l.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(a.ll,{className:"text-sm font-medium",children:"Tickets actifs"}),(0,l.jsx)(d.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsx)(a.aY,{children:(0,l.jsx)("div",{className:"text-2xl font-bold",children:h})})]}),(0,l.jsxs)(a.Zb,{children:[(0,l.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(a.ll,{className:"text-sm font-medium",children:"Messages non lus"}),(0,l.jsx)(i.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsx)(a.aY,{children:(0,l.jsx)("div",{className:"text-2xl font-bold",children:j})})]}),(0,l.jsxs)(a.Zb,{children:[(0,l.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(a.ll,{className:"text-sm font-medium",children:"Temps de r\xe9ponse moyen"}),(0,l.jsx)(x.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsx)(a.aY,{children:(0,l.jsx)("div",{className:"text-2xl font-bold",children:"~2h"})})]})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-7",children:[(0,l.jsxs)(a.Zb,{className:"md:col-span-2 lg:col-span-4",children:[(0,l.jsxs)(a.Ol,{children:[(0,l.jsx)(a.ll,{children:"Tickets r\xe9cents"}),(0,l.jsx)(a.SZ,{children:"Vos tickets les plus r\xe9cents"})]}),(0,l.jsx)(a.aY,{children:t?(0,l.jsx)("div",{className:"space-y-2",children:[1,2,3].map(e=>(0,l.jsxs)("div",{className:"flex items-center justify-between rounded-md border p-3",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)(u.O,{className:"h-4 w-[200px]"}),(0,l.jsx)(u.O,{className:"h-3 w-[150px]"})]}),(0,l.jsx)(u.O,{className:"h-6 w-[80px]"})]},e))}):f?(0,l.jsx)("div",{className:"text-center text-sm text-muted-foreground",children:"Une erreur est survenue lors du chargement des tickets"}):s&&s.length>0?(0,l.jsx)("div",{className:"flex flex-col gap-4",children:s.slice(0,3).map(e=>(0,l.jsx)(r.default,{href:"/client/tickets/".concat(e.id),className:"block p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:(0,l.jsxs)("div",{className:"flex items-center justify-between rounded-md border p-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-medium",children:e.title}),(0,l.jsx)("div",{className:"text-sm text-muted-foreground",children:(0,m.p)(e.createdAt)})]}),(0,l.jsx)("div",{className:"text-sm",children:(0,l.jsx)("span",{className:"inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ".concat("in_progress"===e.status?"bg-blue-50 text-blue-700":"open"===e.status?"bg-yellow-50 text-yellow-700":"bg-green-50 text-green-700"),children:"open"===e.status?"En attente":"in_progress"===e.status?"En cours":"Ferm\xe9"})})]})},e.id))}):(0,l.jsx)("div",{className:"text-center text-sm text-muted-foreground",children:"Aucun ticket r\xe9cent"})})]}),(0,l.jsxs)(a.Zb,{className:"md:col-span-2 lg:col-span-3",children:[(0,l.jsxs)(a.Ol,{children:[(0,l.jsx)(a.ll,{children:"Messages r\xe9cents"}),(0,l.jsx)(a.SZ,{children:"Vos derniers messages"})]}),(0,l.jsx)(a.aY,{children:t?(0,l.jsx)("div",{className:"space-y-2",children:[1,2,3].map(e=>(0,l.jsxs)("div",{className:"flex flex-col gap-1 rounded-md border p-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)(u.O,{className:"h-4 w-[100px]"}),(0,l.jsx)(u.O,{className:"h-3 w-[80px]"})]}),(0,l.jsx)(u.O,{className:"h-4 w-full"})]},e))}):f?(0,l.jsx)("div",{className:"text-center text-sm text-muted-foreground",children:"Une erreur est survenue lors du chargement des messages"}):s&&s.some(e=>(e.messages||[]).length>0)?(0,l.jsx)("div",{className:"space-y-2",children:s.flatMap(e=>(e.messages||[]).map(s=>({...s,ticketTitle:e.title}))).sort((e,s)=>new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime()).slice(0,3).map(e=>(0,l.jsxs)("div",{className:"flex flex-col gap-1 rounded-md border p-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"font-medium",children:"admin"===e.senderType?"Support":"Syst\xe8me"}),(0,l.jsx)("div",{className:"text-xs text-muted-foreground",children:(0,m.p)(e.createdAt)})]}),(0,l.jsx)("p",{className:"text-sm",children:e.content}),(0,l.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Re: ",e.ticketTitle]})]},e.id))}):(0,l.jsx)("div",{className:"text-center text-sm text-muted-foreground",children:"Aucun message r\xe9cent"})})]})]})]})]})]})}},79820:function(e,s,t){"use strict";t.d(s,{Ol:function(){return a},SZ:function(){return i},Zb:function(){return c},aY:function(){return x},eW:function(){return o},ll:function(){return d}});var l=t(57437),r=t(2265),n=t(93448);let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,l.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});c.displayName="Card";let a=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,l.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...r})});a.displayName="CardHeader";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,l.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});d.displayName="CardTitle";let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,l.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})});i.displayName="CardDescription";let x=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,l.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...r})});x.displayName="CardContent";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,l.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...r})});o.displayName="CardFooter"},69140:function(e,s,t){"use strict";t.d(s,{O:function(){return n}});var l=t(57437),r=t(93448);function n(e){let{className:s,...t}=e;return(0,l.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",s),...t})}}},function(e){e.O(0,[7317,912,2972,7861,9041,2556,9991,5090,2971,2117,1744],function(){return e(e.s=82799)}),_N_E=e.O()}]);